<template name='nouvelEvt'>
    <button id="cancel" class="btn pull-right btn-danger"><i class="icon-remove icon-white"></i> Annuler</button>

    <h1>
        {{#if evenement}}
            {{evenement.nom}} <small>modification</small>           
        {{else}}
        Ajouter un évènement
        {{/if}}
    </h1>

    <form method='post' id='frmNouvelEvt' class="form-horizontal"> 
        <input type="hidden" name="dejaexistant" id="dejaexistant" value="{{#if evenement}}{{evenement._id}}{{else}}null{{/if}}"/>
        <fieldset id='evtAdmin'>
            <legend>Administration</legend>
            <div class="control-group">
                <label class="control-label" for="nom">Titre</label>
                <div class="controls">
                    <input type="text" name="nom" id="nom" placeholder="nom de l'événement" required class='span6' value="{{evenement.nom}}"/>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label"  for="admin">Adresse e-mail</label>
                <div class="controls">                
                    <input type="email" name="admin" id="admin"  placeholder="pour la gestion de l'événement" required error{{#if evenement.admin}} disabled='disabled' value='{{evenement.admin}}'{{/if}} />

                </div>
            </div>
        </fieldset>

        <fieldset id='evtParOblig'>
            <legend>Fiche événement</legend>
            <div class="control-group">
                <label class="control-label"  for="admin">Statut</label>
                <div class="controls">
                    <div class="btn-group" data-toggle="buttons-radio" name='statut' id='statut' data-toggle-name='statut' data-value='{{evenement.statut}}'>
                        <button type="button" class="bspopover btn btn-small{{#unless evenement.statut}} active{{/unless}}" data-value="provisoire" 
                                data-placement="bottom" title="En phase de conception" data-content="Les informations fondamentales (date, lieu) sont en attente de validation. Il est trop tôt pour que les participants prennent leurs billets de train.">
                                <i class='icon-question-sign'></i>
                            Provisoire
                        </button>
                        <button type="button" class="bspopover btn btn-small" data-value="definitif"
                                data-placement="top" title="Evénement confirmé" data-content="Les paramètres fondamentaux (date,lieu) sont fixés. Il peut y avoir des enrichissements mais les participants peuvent prendre leurs billets d'avion.">
                                <i class='icon-ok'></i>
                            Définitif
                        </button>
                        {{#if evenement.statut}}
                        <button type="button" class="btn btn-small" data-value="annule"
                                rel="popover" data-placement="top" title="Supprimer cet événement" data-content="L'événement ne se fera finalement pas.">
                                <i class='icon-remove'></i>
                            Annulé</button>
                        {{/if}}
                    </div>  
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Portée</label>
                <div class="controls">             
                    <div class="btn-group" data-toggle="buttons-radio" name='echelle' id='echelle' data-toggle-name='echelle' data-value='{{evenement.echelle}}'>
                        <button type="button" class="btn btn-small{{#unless evenement.echelle}} active{{/unless}}" data-value="local" >Locale</button>
                        <button type="button" class="btn btn-small" data-value="departemental">Départementale</button>
                        <button type="button" class="btn btn-small" data-value="regional">Régionale</button>
                        <button type="button" class="btn btn-small" data-value="national">Nationale</button>
                        <button type="button" class="btn btn-small" data-value="international">Internationale</button>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Dates</label>
                <div class="controls">
                    Du <input type="date" name="datedeb" id="datedeb" placeholder="début (jj/mm/aaaa)" value="{{evenement.datedeb}}"/> au
                    <input type="date" name="datefin" id="datefin" placeholder="fin (jj/mm/aaaa)" value="{{evenement.datefin}}"/>           
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Adresse</label>
                <div class="controls">
                    <input type="text" name="lieu" id="lieu" placeholder="adresse de l'événement" value="{{evenement.lieu}}"/>
                    <input type="text" name="codepostal" id="codepostal" pattern="[0-9]{5}" placeholder="code postal de l'événement" value="{{evenement.codepostal}}"/>
                </div>
            </div>


            <div class="control-group">
                <label class="control-label">Contact</label>
                <div class="controls">
                    <input type="text" name="orga" id="orga" placeholder="nom de l'organisateur" value="{{evenement.orga}}"/>            
                    <input type="email" name="contact" id="contact" placeholder="email" value="{{evenement.contact}}"/>   
                    <input type="tel" name="tel" pattern="^(?:0|\(?\+33\)?\s?|0033\s?)[1-79](?:[\.\-\s]?\d\d){4}$" id="tel" placeholder="téléphone" value="{{evenement.tel}}"/>   
                </div>
            </div>


            <div class="control-group">
                <label class="control-label">Présentation / Programme</label>
                <div class="controls">
                    <textarea name="programme" id="programme" rows="5">{{evenement.programme}}</textarea>
                </div>
            </div>
        </fieldset>

        <fieldset id='evtCompInfo'>
            <a name='ancreCompInfo'></a>
            <legend id='ouvrircomplement'>Compléments d'information <i  class='icon-chevron-right'></i></legend>

            <div class="control-group  evtParOption">
                <label class="control-label">Horaires</label>
                <div class="controls">
                    <input type="text" name="horaires" id="horaires" value="{{evenement.horaires}}"/>
                </div>
            </div>
            <div class="control-group evtParOption">
                <label class="control-label">Forclusion</label>
                <div class="controls">
                    <input type="date" name="forclusion" id="forclusion" placeholder="Date limite d'inscription" value="{{evenement.forclusion}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Pré-requis</label>
                <div class="controls">
                    <input type="text" name="conditions" id="conditions"  placeholder="Conditions de participation" value="{{evenement.conditions}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Prix</label>
                <div class="controls">
                    <input type="text" name="prix" id="prix" placeholder="Coût d'inscription" value="{{evenement.prix}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Site web</label>
                <div class="controls">
                    <input type="url" name="url" id="url" placeholder="Page d'information complémentaire" value="{{evenement.url}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Plan d'accès</label>
                <div class="controls">
                    <input type="url" name="plan" id="plan" placeholder="adresse d'une carte en ligne" value="{{evenement.plan}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Prestation complémentaires</label>
                <div class="controls">
                    <textarea name="options" id="options" rows="5" placeholder="disponibles lors de l'événement" >{{evenement.options}}</textarea>
                </div>
            </div>
            <div class="control-group evtParOption">
                <label class="control-label">Cible (public attendu)</label>
                <div class="controls">
                    <div class="btn-group" name='cible' id='cible' data-toggle="buttons-radio" data-toggle-name='cible' data-value='{{evenement.cible}}'>
                        <button type="button" class="btn btn-small {{#unless evenement.cible}} active{{/unless}}" data-value="competiteurs">Competiteurs</button>
                        <button type="button" class="btn btn-small" data-value="debutants">Débutants</button>
                        <button type="button" class="btn btn-small" data-value="confirmés">Confirmés</button>
                        <button type="button" class="btn btn-small" data-value="jeunes">Jeunes</button>
                    </div>
                </div>
            </div>
        </fieldset>

        <fieldset id='evtReco'>
            <legend id='ouvrirreco'>Recommandations <i  class='icon-chevron-right'></i></legend>
            <div class="control-group evtParOption">
                <label class="control-label">Hébergements</label>
                <div class="controls">
                    <textarea name="hebergement" id="hebergement" rows="5">{{evenement.hebergement}}</textarea>
                </div>
            </div>
            <div class="control-group evtParOption">
                <label class="control-label">Restauration</label>
                <div class="controls">
                    <textarea name="restauration" id="restauration" rows="5">{{evenement.restauration}}</textarea>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Visites</label>
                <div class="controls">
                    <textarea name="visites" id="visites" rows="5">{{evenement.visites}}</textarea>
                </div>
            </div>
        </fieldset>
        <button id="submitevt" class="submit btn btn-success">
            {{#if evenement}}
            Enregistrer les modifications
            {{else}}
            Ajouter un événement au calendrier national
            {{/if}}
        </button>

    </form>
</template>