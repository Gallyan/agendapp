<template name='nouvelEvt'>
    <button id="cancel" class="btn pull-right btn-danger"><i class="icon-remove icon-white"></i> Annuler</button>

    <h1>
        {{#if evenement}}
            {{evenement.nom}} <small>modification</small>           
        {{else}}
         Ajouter un évènement
        {{/if}}
    </h1>

    <form method='post' id='frmNouvelEvt' class="form-horizontal"> 


        <fieldset id='evtAdmin'>
            <legend>Administration</legend>
            <div class="control-group">
                <label class="control-label" for="nom">Titre</label>
                <div class="controls">
                    <input type="text" name="nom" id="nom" placeholder="nom de l'événement" required class='span6' value="{{evenement.nom}}"/>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label"  for="admin">Adresse e-mail</label>
                <div class="controls">                
                        <input type="email" name="admin" id="admin"  placeholder="pour la gestion de l'événement" required {{#if evenement.admin}} disabled='disabled' value='{{evenement.admin}}'{{/if}} />
                   
                </div>
            </div>
        </fieldset>

        <fieldset id='evtParOblig'>
            <legend>Fiche événement</legend>
            <div class="control-group">
                <label class="control-label"  for="admin">Statut & Portée</label>
                <div class="controls">
                    <div class="btn-group" data-toggle="buttons-radio">
                        <button type="button" class="btn btn-small{{#unless evenement.statut}} active{{/unless}}" data-value="enprojet">En projet</button>
                        <button type="button" class="btn btn-small btn-primary" data-value="confirme">Confirmé</button>
                        {{#if evenement.statut}}
                        <button type="button" class="btn btn-small btn-danger" data-value="annule">Annulé</button>
                        {{/if}}
                        <input type="hidden" name="statut" value="{{evenement.statut}}"  id="statut" />
                    </div>
                    <div class="btn-group" data-toggle="buttons-radio">
                        <button type="button" class="btn btn-small{{#unless evenement.echelle}} active{{/unless}}" data-value="locale" >Locale</button>
                        <button type="button" class="btn btn-small" data-value="departementale">Départementale</button>
                        <button type="button" class="btn btn-small" data-value="regionale">Régionale</button>
                        <button type="button" class="btn btn-small" data-value="nationale">Nationale</button>
                        <button type="button" class="btn btn-small" data-value="internationale">Internationale</button>
                        <input type="hidden" name="echelle" value=""  id="echelle" />
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Dates</label>
                <div class="controls">
                    Du <input type="date" name="datedeb" id="datedeb" placeholder="début (jj/mm/aaaa)" value="{{evenement.datedeb}}"/> au
                    <input type="date" name="datefin" id="datefin" placeholder="fin (jj/mm/aaaa)" value="{{evenement.datefin}}"/>           
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Adresse</label>
                <div class="controls">
                    <input type="text" name="lieu" id="lieu" placeholder="adresse de l'événement" value="{{evenement.lieu}}"/>
                    <input type="text" name="codepostal" id="codepostal" pattern="[0-9]{5}" placeholder="code postal de l'événement" value="{{evenement.codepostal}}"/>
                </div>
            </div>


            <div class="control-group">
                <label class="control-label">Contact</label>
                <div class="controls">
                    <input type="text" name="orga" id="orga" placeholder="nom de l'organisateur" value="{{evenement.orga}}"/>            
                    <input type="email" name="contact" id="contact" placeholder="email" value="{{evenement.contact}}"/>   
                    <input type="tel" name="tel" pattern="^(?:0|\(?\+33\)?\s?|0033\s?)[1-79](?:[\.\-\s]?\d\d){4}$" id="tel" placeholder="téléphone" value="{{evenement.tel}}"/>   
                </div>
            </div>

            
        <div class="control-group">
            <label class="control-label">Présentation / Programme</label>
            <div class="controls">
                <textarea name="programme" id="programme" rows="5">{{evenement.programme}}</textarea>
            </div>
        </div>
        </fieldset>

        <fieldset id='evtCompInfo'>
            <a name='ancreCompInfo'></a>
            <legend>Compléments d'information <i id='ouvrircomplement' class='icon-eye-open'></i></legend>

            <div class="control-group  evtParOption">
                <label class="control-label">Horaires</label>
                <div class="controls">
                    <input type="text" name="horaires" id="horaires" value="{{evenement.horaires}}"/>
                </div>
            </div>
            <div class="control-group evtParOption">
                <label class="control-label">Forclusion</label>
                <div class="controls">
                    <input type="date" name="forclusion" id="forclusion" placeholder="Date limite d'inscription" value="{{evenement.forclusion}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Pré-requis</label>
                <div class="controls">
                    <input type="text" name="conditions" id="conditions"  placeholder="Conditions de participation" value="{{evenement.conditions}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Prix</label>
                <div class="controls">
                    <input type="text" name="prix" id="prix" placeholder="Coût d'inscription" value="{{evenement.prix}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Site web</label>
                <div class="controls">
                    <input type="url" name="url" id="url" placeholder="Page d'information complémentaire" value="{{evenement.url}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Plan d'accès</label>
                <div class="controls">
                    <input type="url" name="plan" id="plan" placeholder="adresse d'une carte en ligne" value="{{evenement.plan}}"/>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Prestation complémentaires</label>
                <div class="controls">
                    <textarea name="options" id="options" rows="5" placeholder="disponibles lors de l'événement" >{{evenement.options}}</textarea>
                </div>
            </div>
            <div class="control-group evtParOption">
                <label class="control-label">Cible (public attendu)</label>
                <div class="controls">
                    <div class="btn-group" data-toggle="buttons-radio">
                        <button type="button" class="btn btn-small {{#unless evenement.cible}} active{{/unless}}" data-value="competiteurs">Competiteurs</button>
                        <button type="button" class="btn btn-small" data-value="debutants">Débutants</button>
                        <button type="button" class="btn btn-small" data-value="confirmés">Confirmés</button>
                        <button type="button" class="btn btn-small" data-value="jeunes">Jeunes</button>
                        <input name="cible" id="cible" type="hidden" value="" />
                    </div>
                </div>
            </div>
        </fieldset>

        <fieldset id='evtReco'>
            <legend>Recommandations <i id='ouvrirreco' class='icon-eye-open'></i></legend>
            <div class="control-group evtParOption">
                <label class="control-label">Hébergements</label>
                <div class="controls">
                    <textarea name="hebergement" id="hebergement" rows="5">{{evenement.hebergement}}</textarea>
                </div>
            </div>
            <div class="control-group evtParOption">
                <label class="control-label">Restauration</label>
                <div class="controls">
                    <textarea name="restauration" id="restauration" rows="5">{{evenement.restauration}}</textarea>
                </div>
            </div>

            <div class="control-group evtParOption">
                <label class="control-label">Visites</label>
                <div class="controls">
                    <textarea name="visites" id="visites" rows="5">{{evenement.visites}}</textarea>
                </div>
            </div>
        </fieldset>
        
        <button id="submitevt" class="submit btn btn-success">
            {{#if evenement}}
                Enregistrer les modifications
            {{else}}
                Ajouter un événement au calendrier national
            {{/if}}
        </button>
        <div id="formInvalid" class="alert alert-block alert-error fade in" style="display:none">
            <button type="button" class="close" data-dismiss="alert">×</button>
            <h4 class="alert-heading">Attention, vos données sont invalides !</h4>
            <p>Merci de remplir correctement les champs du formulaire avant de le valider.</p>
          </div>
    </form>
</template>